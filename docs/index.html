<!DOCTYPE html>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-76795314-1', 'auto');
  ga('send', 'pageview');

</script>
<html lang="en">
  <head>
    <title>  Reference</title>
    <link rel="stylesheet" type="text/css" href="css/jazzy.css" />
    <link rel="stylesheet" type="text/css" href="css/highlight.css" />
    <meta charset='utf-8'>
    <script src="js/jquery.min.js" defer></script>
    <script src="js/jazzy.js" defer></script>
    
  </head>
  <body>
    <a title="  Reference"></a>
    <header>
      <div class="content-wrapper">
        <p><a href="index.html"> Docs</a> </p>
      </div>
    </header>
    <div class="content-wrapper">
      <p id="breadcrumbs">
        <a href="index.html"> Reference</a>
        <img id="carat" src="img/carat.png" />
          Reference
      </p>
    </div>
    <div class="content-wrapper">
      <nav class="sidebar">
        <ul class="nav-groups">
          <li class="nav-group-name">
            <a href="Classes.html">Classes</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Classes/CaffeineHTTPProxy.html">CaffeineHTTPProxy</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Extensions.html">Extensions</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Extensions/NSURLSessionConfiguration.html">NSURLSessionConfiguration</a>
              </li>
            </ul>
          </li>
        </ul>
      </nav>
      <article class="main-content">
        <section>
          <section class="section">
            
          
<a href='#contact_our_engineers_at_a_href_mailto_help_caffei_net_help_caffei_net_a_for_a_trial' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h3 id='contact_our_engineers_at_a_href_mailto_help_caffei_net_help_caffei_net_a_for_a_trial'>Contact our engineers at <a href="mailto:help@caffei.net">help@caffei.net</a> for a trial.</h3>
<h3>Problems submitting to the app store? <a href="./AppSubmission.html">Click here</a></h3>
<h3>Want to A/B Test Caffeine? <a href="./ABTesting.html">Click here</a></h3>
<a href='#integration_getting_started' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h1 id='integration_getting_started'>Integration/Getting Started</h1>

<p>No backend changes. Takes about 15 minutes inside Xcode. You work with three APIs inside the <a href="./Classes/CaffeineHTTPProxy.html">CaffeineHTTPProxy</a> class. The steps are described below. </p>
<a href='#steps_to_integrate' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h2 id='steps_to_integrate'>Steps to Integrate</h2>

<p>You should have received a Caffeine bundle containing six items: four frameworks and two files (picture below) which you will copy into your application bundle. If you have not, please contact us at <a href="mailto:help@caffei.net">help@caffei.net</a>. </p>

<p><img src="./CaffeineBundleSS.png" alt="CaffeineBundle"></p>

<ul>
<li>The caffeine.license file is required to use Caffeine. It contains information that uniquely identifies your organization.</li>
<li>CocoaAsyncSocket.framework is an <a href="https://github.com/robbiehanson/CocoaAsyncSocket">open source library</a> that Caffeine uses for fast-UDP diagnostic logging.</li>
<li>NaOH.framework (pronounced <q>sodium hydroxide</q>) is an <a href="https://code.sealedabstract.com/drewcrawford/NaOH">open source library</a> built and maintained by us - forked from <a href="https://github.com/jedisct1/libsodium">libsodium</a>, implementing Caffeine’s security.</li>
<li>Nitrogen.framework contains our proprietary protocol.</li>
<li>Proxeine.framework is the interpreter (proxy) that converts whatever
networking library is used on the client into Caffeine.</li>
<li>Proxy.key contains the public key the client will use to authenticate with
our proxy server.</li>
</ul>
<a href='#1_drag_and_drop_the_four_frameworks_into_the_embedded_binaries_section_in_xcode_found_on_the_project_s_general_tab_in_the_subsequent_prompt_make_sure_to_check_copy_items_if_needed_before_pressing_finish' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h3 id='1_drag_and_drop_the_four_frameworks_into_the_embedded_binaries_section_in_xcode_found_on_the_project_s_general_tab_in_the_subsequent_prompt_make_sure_to_check_copy_items_if_needed_before_pressing_finish'>1. Drag and drop the four frameworks into the Embedded Binaries section in Xcode (found on the project’s general tab). In the subsequent prompt, make sure to check “Copy items if needed” before pressing “Finish”.</h3>

<p><img src="./DragAndDropSS.png" alt="DragAndDropSS"></p>

<p><img src="./FrameworksFinalCopySS.png" alt="FrameworksFinalCopySS"></p>
<a href='#you_should_now_see_all_four_frameworks_present_within' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h3 id='you_should_now_see_all_four_frameworks_present_within'>You should now see all four frameworks present within</h3>

<p>a)  Xcode’s Project Navigator</p>

<p>b)  The Embedded Binaries section</p>

<p>c)  The Linked Frameworks and Libraries section</p>

<p>(pictured below)</p>

<p><img src="./FrameworksPresentWithinSS.png" alt="FrameworksPresentWithinSS"></p>
<a href='#2_drag_and_drop_the_code_proxy_key_code_and_code_caffeine_license_code_into_the_xcode_project_and_add_and_copy_to_the_main_application_target_again_ensure_that_copy_items_if_needed_is_checked_in_the_subsequent_prompt' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h3 id='2_drag_and_drop_the_code_proxy_key_code_and_code_caffeine_license_code_into_the_xcode_project_and_add_and_copy_to_the_main_application_target_again_ensure_that_copy_items_if_needed_is_checked_in_the_subsequent_prompt'>2. Drag and drop the <code>proxy.key</code> and <code>caffeine.license</code> into the Xcode project and add (and copy) to the main application target. Again, ensure that “Copy items if needed” is checked in the subsequent prompt.</h3>

<p><img src="./DragAndDropFilesSS.png" alt="DragAndDropFilesSS"></p>

<p><img src="./AddingToMainTargetSS.png" alt="AddingToMainTargetSS"></p>
<a href='#you_should_now_see_the_two_files_caffeine_license_and_proxy_key_within_xcode_s_project_navigator_pictured_below' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h3 id='you_should_now_see_the_two_files_caffeine_license_and_proxy_key_within_xcode_s_project_navigator_pictured_below'>You should now see the two files “caffeine.license” and “proxy.key” within Xcode’s Project Navigator (pictured below)</h3>

<p><img src="./FilesPresentInNavigatorSS.png" alt="FilesPresentInNavigatorSS"></p>
<a href='#3_in_the_main_target_s_build_settings_set_embedded_content_contains_swift_code_to_yes' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h3 id='3_in_the_main_target_s_build_settings_set_embedded_content_contains_swift_code_to_yes'>3. In the main target’s build settings, set “Embedded Content Contains Swift Code” to Yes</h3>

<p><img src="./EmbeededContainsSwiftSS.png" alt="EmbeededContainsSwiftSS"></p>
<a href='#4_in_your_app_delegate_import_the_proxeine_framework' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h3 id='4_in_your_app_delegate_import_the_proxeine_framework'>4. In your App Delegate, import the Proxeine framework.</h3>

<p>Swift:</p>
<pre class="highlight swift"><code><span class="kd">import</span> <span class="kt">Proxeine</span>
</code></pre>

<p>Objective-C:</p>
<pre class="highlight objective_c"><code><span class="cp">#import &lt;Proxeine/Proxeine-Swift.h&gt;
</span></code></pre>
<a href='#5_locate_the_code_application_didfinishlaunchingwithoptions_code_function_and_call_the_code_start_code_function' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h3 id='5_locate_the_code_application_didfinishlaunchingwithoptions_code_function_and_call_the_code_start_code_function'>5. Locate the <code>application:didFinishLaunchingWithOptions:</code> function and call the <code>start()</code> function:</h3>

<p>Swift:</p>
<pre class="highlight swift"><code><span class="kt">CaffeineHTTPProxy</span><span class="o">.</span><span class="nf">start</span><span class="p">()</span>
</code></pre>

<p>Objective-C: </p>
<pre class="highlight objective_c"><code><span class="p">[</span><span class="n">CaffeineHTTPProxy</span> <span class="nf">start</span><span class="p">];</span>
</code></pre>
<a href='#6_caffeine_defaults_to_off_so_no_traffic_will_be_accelerated_until_specific_urls_or_sets_of_urls_are_specified_this_is_done_through_caffeinehttpproxy_s_allow_and_deny_functions' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h3 id='6_caffeine_defaults_to_off_so_no_traffic_will_be_accelerated_until_specific_urls_or_sets_of_urls_are_specified_this_is_done_through_caffeinehttpproxy_s_allow_and_deny_functions'>6. Caffeine defaults to off, so no traffic will be accelerated until specific URLs or sets of URLs are specified. This is done through CaffeineHTTPProxy’s allow and deny functions.</h3>

<p>Swift: </p>
<pre class="highlight swift"><code><span class="kt">CaffeineHTTPProxy</span><span class="o">.</span><span class="nf">allow</span><span class="p">(</span><span class="err">"</span><span class="nv">http</span><span class="p">:</span><span class="c1">//google.com")</span>
</code></pre>

<p>Objective-C:</p>
<pre class="highlight objective_c"><code><span class="p">[</span><span class="n">CaffeineHTTPProxy</span> <span class="nf">allow</span><span class="p">:</span><span class="err">@"</span><span class="nf">http</span><span class="p">:</span><span class="c1">//google.com"];
</span></code></pre>

<p>To accelerate sets of URLs use the asterisk <q>*</q> to denote prefixes or suffixes.</p>

<p>Swift: </p>
<pre class="highlight swift"><code><span class="kt">CaffeineHTTPProxy</span><span class="o">.</span><span class="nf">allow</span><span class="p">(</span><span class="s">"http://google.com/*"") //everything starting with http://google.com/
CaffeineHTTPProxy.allow("</span><span class="o">*.</span><span class="n">jpg</span><span class="s">") //all urls ENDING in .jpg
CaffeineHTTPProxy.deny("</span><span class="nv">https</span><span class="p">:</span><span class="c1">//google.com/") // prevents HTTPS acceleration to the single URL, `https://google.com/`</span>
</code></pre>

<p>Objective-C:</p>
<pre class="highlight objective_c"><code><span class="p">[</span><span class="n">CaffeineHTTPProxy</span> <span class="nf">allow</span><span class="p">:</span><span class="err">@"</span><span class="nf">http</span><span class="p">:</span><span class="c1">//google.com/*"];
</span></code></pre>

<p>See CaffeineHTTPProxy&rsquo;s <a href="./Classes/CaffeineHTTPProxy.html#/s:ZFC8Proxeine17CaffeineHTTPProxy5allowFSST_">allow:</a> and <a href="./Classes/CaffeineHTTPProxy.html#/s:ZFC8Proxeine17CaffeineHTTPProxy4denyFSST_">deny:</a> for more examples of usage. </p>


<p><img src="./AppDelegateSS.png" alt="AppDelegateSS"></p>

<p>If you require any help, contact us at <a href="mailto:help@caffei.net">help@caffei.net</a></p>

<p> For more information about Caffeine, the HTTP falling back mechanism, and more, please click <a href="./FAQ.html">here</a> </p>


          </section>
        </section>
        <section id="footer">
          <p>&copy; 2016 <a class="link" href="" target="_blank" rel="external"></a>. All rights reserved. (Last updated: 2016-04-28)</p>
          <p>Generated by <a class="link" href="https://github.com/realm/jazzy" target="_blank" rel="external">jazzy ♪♫ v0.6.0</a>, a <a class="link" href="http://realm.io" target="_blank" rel="external">Realm</a> project.</p>
        </section>
      </article>
    </div>
  </body>
</div>
</html>
